<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Will Eatherton on Will Eatherton</title>
    <link>https://willeatherton.com/</link>
    <description>Recent content in Will Eatherton on Will Eatherton</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Sun, 15 Oct 2017 00:00:00 -0700</lastBuildDate>
    <atom:link href="/" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Opaque Crypto : What happens when the Enterprise Network goes Dark ?</title>
      <link>https://willeatherton.com/post/crypto1v4/</link>
      <pubDate>Tue, 05 Sep 2017 14:00:29 -0800</pubDate>
      
      <guid>https://willeatherton.com/post/crypto1v4/</guid>
      <description>

&lt;p&gt;&lt;em&gt;&lt;strong&gt;The Rise of Opaque encryption Resets the Network Security Industry&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;{Note this writeup was done in summer of 2017 while I was at Skyport Systems as Founder and VP of Engineering}&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;During my time at Cisco and Juniper (1999-2013), our marketing departments unveiled many campaigns around the &amp;ldquo;Intelligent Network.&amp;rdquo; To deliver on this message, we kept building products and features that would use stateful views of deep packet data to help reinforce the marketing story about the value of the network.  During the same time, a multi-billion-dollar industry grew out of providing visibility into and control of enterprise traffic, including next-generation firewalls, features in routers, IPS/IDS, UTM, web proxies, data loss prevention, anti-virus, and secure web gateways.&lt;/p&gt;

&lt;p&gt;We knew that while uncommon at the time, that most of those features we were adding would become irrelevant if the day came that all the data flowing through our devices was encrypted, but that seemed a very far off possibility.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Fast forward to 2017.&lt;/strong&gt; Not only is encryption here with a vengeance,  it will soon cause  most network traffic to  go dark from the point of view of IT departments. This year the threshold was crossed with &lt;a href=&#34;https://www.wired.com/2017/01/half-web-now-encrypted-makes-everyone-safer/&#34; target=&#34;_blank&#34;&gt;now over 50% of web traffic using HTTPS&lt;/a&gt;. We are also seeing the rise of new encryption protocols that do not accommodate man-in-the-middle (MITM) monitoring. As a result, most traffic will speed by, opaque to inspection from the standpoint of IT and security administrators.&lt;/p&gt;

&lt;p&gt;These MITM boxes (arguably) own one side of each leg in internal data communications (with the definition that the enterprise IT department owns all client/server endpoints in its network) and for years MITM proxies terminated encrypted sessions and re-originated them, in which case everything is visible.  However, moving forward with new protocols increasingly they will only be able to gather extremely superficial intelligence from the traffic headers flowing through them in clear text.&lt;/p&gt;

&lt;h2 id=&#34;mitm-today&#34;&gt;MITM today&lt;/h2&gt;

&lt;p&gt;Before launching into new developments with encryption, here are the main uses of traffic inspection today:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Malware and botnet detection to contain the lateral spread of malware and reach-out from enterprise to command and control points&lt;/li&gt;
&lt;li&gt;Authentication/validation of access to critical segments and systems&lt;/li&gt;
&lt;li&gt;Detecting policy violations related to content and data access&lt;/li&gt;
&lt;li&gt;Detecting data exfiltration (theft)&lt;/li&gt;
&lt;li&gt;General visibility and analytics&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Over the past two decades, MITM boxes evolved as invisible inspectors (transparent bumps in the wire) in the enterprise network. This model was relatively easy to operationalize and vendors provided a range of product options.&lt;/p&gt;

&lt;p&gt;Today, there are two  main scenarios for deploying MITM boxes. The left side of the diagram below shows traditional inspection of traffic between enterprise servers within their perimiter to external points like clients, SaaS and IaaS services. The right side of the diagram shows the trend over the past 5-7 years towards deploying MITM devices inside the enterprise to provide visibility and segment the enterprise internally.  For these internal segmentation cases the network security boxes can intercept traffic between servers, or across boundaries that connect servers to databases and storage.&lt;/p&gt;




&lt;figure&gt;

&lt;img src=&#34;https://willeatherton.com/img/Crypto1_connectivity2.png&#34; /&gt;



&lt;figcaption data-pre=&#34;Figure &#34; data-post=&#34;:&#34; &gt;
  &lt;h4&gt;Man-in-The-Middle locations in Enterprises Today&lt;/h4&gt;
  
&lt;/figcaption&gt;

&lt;/figure&gt;

&lt;h2 id=&#34;what-is-opaque-crypto&#34;&gt;What is Opaque Crypto&lt;/h2&gt;

&lt;p&gt;Opaque cryptography covers a broad set of developments that has a heavy focus on HTTPS, but includes other protocol stacks also as shown below.&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Connection Between&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;New Developments&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Application&amp;lt;-&amp;gt;Database&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Mongo, Postgres, etc w TLS&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Application&amp;lt;-&amp;gt;Storage&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;SMBv3, NFS4.1 w Kerberized Crypto&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Application&amp;lt;-&amp;gt;Application&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Increased ease of use of TLS Libraries&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Client to Server&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;HTTP/2, TLS1.3, QUIC&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Iaas to On-Premises&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Encrypted VPNs with IPSEC&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;New developments in network traffic encryption&lt;/p&gt;

&lt;p&gt;Without doing a deep dive on each of these new developments, we can categorize the trends that make it hard to leverage the existing proxy technologies :&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;A general trend towards use of &lt;a href=&#34;http://www.informationsecuritybuzz.com/articles/the-pitfalls-of-perfect-forward-secrecy/&#34; target=&#34;_blank&#34;&gt;Perfect Forward Secrecy (PFS) and acceptance of it as a valid  goal for encryption standards&lt;/a&gt;.  PFS is a property of a key exchange that deliberately prevents after-the-fact decryption and defeats all passive MITM technologies.&lt;/li&gt;
&lt;li&gt;Increased use of non-SSL/TLS encryption protocols with no accompanying MITM infrastructure. For example, Google&amp;rsquo;s QUIC is an alternative to TLS that vendors are lagging behind (currently unable to support).&lt;/li&gt;
&lt;li&gt;Multi-path to improve performance. Multi-path makes decryption difficult  because a single MITM box only sees a portion of the needed state.&lt;/li&gt;
&lt;li&gt;Compressed header state and fewer clear text headers. This makes it difficult to determine what traffic to decrypt.

&lt;ul&gt;
&lt;li&gt;TLS 1.3 does provide a clear text extension (SNI) to communicate a target server&amp;rsquo;s host name. While it seems useful for decryption determination, it can be easily spoofed.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Increased use of certificate and public key pinning, which are hard blocks to traditional transparent MITM.

&lt;ul&gt;
&lt;li&gt;Traditionally if you read network security vendor documents the response to this issue was that SaaS vendors simply will not risk their own business by pinning.&lt;/li&gt;
&lt;li&gt;However, the submissiveness of SaaS vendors is changing with a growing number of services that cross consumer and enterprise boundaries, as well as growing number of SaaS vendors that value the trust of the end users over friction with IT admins.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;TCP connection re-use (enabled through HTTP/2 and TLS1.3) complicates state machines for MITM devices.&lt;/li&gt;
&lt;li&gt;Technologies that are crossing enterprise perimeter that were never meant for transparently inserting network security in the middle, for example IPSEC based tunnels.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Reading through the above list, what is interesting is that while it seems reasonable that many of these developments could be countered to some degree by network security vendors, taken as a sum total the level of disruption in such a short time is staggering.&lt;/p&gt;

&lt;h2 id=&#34;forces-resulting-in-opaque-crypto&#34;&gt;Forces resulting in Opaque Crypto&lt;/h2&gt;

&lt;p&gt;It is frequently called out that the rise of machine learning in past few years is due to the simultaneous occurrence of 3 factors : 1) significant increases in computation,  2) availability of massive data sets, and 3) Improvement in fundamental algorithms.&lt;/p&gt;

&lt;p&gt;There is a parallel set of forces that are causing a rise of encryption in a form that removes visibility (i.e. Opaque Crypto).  These forces which are detailed in following sub-sections are :&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;1) Consumer web companies now lead definition of Web protocols&lt;/li&gt;
&lt;li&gt;2) The cost of encryption goes to zero&lt;/li&gt;
&lt;li&gt;3) Cloud ripple effects&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;force-1-consumer-web-companies-now-lead-definition-of-web-protocols&#34;&gt;Force #1 : Consumer web companies now lead definition of Web protocols&lt;/h3&gt;

&lt;p&gt;At one time, vendors like Cisco, working with service providers and enterprise customers, drove the key web and internet standards.  The key force driving the technology choices at end of the day was what would sell more routers, switches, and networking security boxes.&lt;/p&gt;

&lt;p&gt;While the fact that technology gets driven for economic ends has not changed, the special interests that are now getting prioritized is that of web companies that want to minimize costs, and maximize value to their consumer customers. In the pursuit of pro-consumer profits, web properties focus on characteristics like low latency, high throughput, good user experience, and trust.&lt;/p&gt;

&lt;p&gt;On the topic of trust, consumer web companies don&amp;rsquo;t respect the MITM model that financials so love, because in the consumer arena there is no legitimate reason to insert a MITM (only bad reasons like stealing credit card numbers).  Additionally in the post Edward Snoweden era, the general negative public reaction to web companies supporting snooping of any kind has added additional pressure on these companies to resist incept models.  The result is that web companies believe to earn trust it requires strong end-end security models, and in the pursuit of profit, that is what consumer web companies are delivering.&lt;/p&gt;

&lt;p&gt;A good example of consumer web companies&amp;rsquo; hostility towards MITM architecture is a &lt;a href=&#34;https://jhalderm.com/pub/papers/interception-ndss17.pdf&#34; target=&#34;_blank&#34;&gt;2017 paper that includes authors from Google and Cloudflare&lt;/a&gt; that essentially condemns HTTPS interception.&lt;/p&gt;




&lt;figure&gt;

&lt;img src=&#34;https://willeatherton.com/img/Crypto1_InterceptPaper.png&#34; /&gt;



&lt;figcaption data-pre=&#34;Figure &#34; data-post=&#34;:&#34; &gt;
  &lt;h4&gt;Paper condemning HTTPS Intercept&lt;/h4&gt;
  
&lt;/figcaption&gt;

&lt;/figure&gt;

&lt;p&gt;This paper is the result of a massive investment. The authors tested a vast combination of security products and software versions from top vendors, and offer this finding in summary:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Most concerningly, 62% of traffic that traverses a network middlebox has reduced security and 58% of middlebox connections have severe vulnerabilities. We investigated popular antivirus and corporate proxies, finding that nearly all reduce connection security and that many introduce vulnerabilities&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;After publication of this paper, &lt;a href=&#34;https://www.us-cert.gov/ncas/alerts/TA17-075A&#34; target=&#34;_blank&#34;&gt;a US agency issued a CERT (Alert TA17-075A)&lt;/a&gt; citing it and issuing a similar warning about the risks of HTTPS interception.&lt;/p&gt;

&lt;p&gt;In recent discussions with a household name financial about these trends, the  customer noted that they were talking to Google about the  disruption that standards like Google&amp;rsquo;s QUIC/TLS1.3 could cause across their industry due to these standards&amp;rsquo; implicit push against interception.  While the frustration is understandable given that financials are heavily invested in the current model for monitoring/protecting their perimeter, the new direction looks clear barring major government interference.&lt;/p&gt;

&lt;h3 id=&#34;force-2-the-cost-of-encryption-goes-to-zero&#34;&gt;Force #2 : The cost of encryption goes to zero&lt;/h3&gt;

&lt;p&gt;Though not strictly a cause, a drop in the cost of encryption was necessary to ease its adoption.  Improvements to key encryption standards in hardware&amp;ndash;and more importantly software&amp;ndash;have made it easier to support very strong encryption algorithms, and at a level that performance is no longer an issue for either the client or server side of a connection.&lt;/p&gt;

&lt;p&gt;Improvements like Intel Advanced Encryption Standard instructions speed up  encryption, and there are ongoing efforts to improve all aspects of TLS performance, including &lt;a href=&#34;https://netdevconf.org/1.2/papers/ktls.pdf&#34; target=&#34;_blank&#34;&gt;making TLS a kernel service&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&#34;force-3-cloud-ripple-effects&#34;&gt;Force #3 : Cloud ripple effects&lt;/h3&gt;

&lt;p&gt;This force was harder to pin down, but outside of web traffic and the falling cost of encryption there was clearly at least one more force driving the rise of opaque encryption.  Two example trends that are not explained by the two forces above are the  recent moves towards &lt;a href=&#34;https://whyistheinternetbroken.wordpress.com/tag/nfsv4-1/&#34; target=&#34;_blank&#34;&gt;encrypted storage traffic with NFS4.1&lt;/a&gt; using kerberized encryption as well as increased use of &lt;a href=&#34;https://technet.microsoft.com/en-us/library/dn551363(v=ws.11).aspx&#34; target=&#34;_blank&#34;&gt;SMB 3.0 with encryption&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;So why is the above happening ?  Lets start with the assumption that data and workloads without notable business value will continue quickly moving to public cloud.  If you are an enterprise vendor of ISV software or systems, you are flailing around, looking to counter this trend with new features, and to push the notion that your customers should be keeping important stuff in a enterprise owned data centers.  This leads to features like encrypted data at rest, as well as encrypted data traffic for storage, databases and applications.&lt;/p&gt;

&lt;p&gt;Beyond these vendor driven features, cloud in the form of SaaS has produced thousands of enterprise SaaS services.  Beyond client connections, these SaaS services most often involve agents or VMs sitting in the enterprise data center that reach out to their cloud service origin (most commonly on AWS) to make some sort of data connection and do data integrations.  These SaaS services are following in the foot steps of their consumer web brethren and all will be increasingly opaque.&lt;/p&gt;

&lt;p&gt;Finally going to the core trend of IaaS adoption in enterprise, services like AWS are resulting in many (poorly managed) enterprises sprinkling VPC VPN gateways all over their internal network.  Each of these end points is rendering the outer perimeter of the enterprise meaningless as each is a bi-directional gateway between an entire world encapsulated in the AWS VPC to the heart of the data center. And again these are all encrypted traffic that is not being proxied by those HTTPS interception MITM devices.&lt;/p&gt;

&lt;h2 id=&#34;enterprise-vendors-responses-to-opaque-crypto&#34;&gt;Enterprise vendors&amp;rsquo; responses to opaque crypto&lt;/h2&gt;

&lt;p&gt;The network security industry has largely been quiet about the trends discussed here.  Some companies like &lt;a href=&#34;https://www.theregister.co.uk/2017/02/27/blue_coat_chokes_on_chrome_encryption_update/&#34; target=&#34;_blank&#34;&gt;Bluecoat have been  visible in their struggles to keep up with protocols like TLS1.3&lt;/a&gt;. But overall there has been little substantive industry-wide discussion of the issues or possible solutions.&lt;/p&gt;

&lt;p&gt;One exception is Cisco, which has highlighted &lt;a href=&#34;https://www.ciscolive.com/online/connect/sessionDetail.ww?SESSION_ID=90863&amp;amp;tclass=popup&#34; target=&#34;_blank&#34;&gt;several issues with opaque crypto&lt;/a&gt; and advocated a potential solution.  In mid-2017 Cisco introduced &lt;a href=&#34;https://www.cisco.com/c/dam/en/us/solutions/collateral/enterprise-networks/enterprise-network-security/nb-09-encrytd-traf-anlytcs-wp-cte-en.pdf&#34; target=&#34;_blank&#34;&gt;Cisco Encrypted Traffic Analytics&lt;/a&gt;, and they deserve credit for being one of the only established security vendors to call out this issue.  They also deserve credit for &lt;a href=&#34;https://arxiv.org/pdf/1607.01639.pdf&#34; target=&#34;_blank&#34;&gt;publishing academic papers&lt;/a&gt; related to their solutions and &lt;a href=&#34;https://github.com/cisco/joy&#34; target=&#34;_blank&#34;&gt;making available software for feature extraction from packet traces, plus an analysis tool on github&lt;/a&gt; that seem related to their for-profit product.&lt;/p&gt;

&lt;p&gt;So what does Cisco propose?  As their graphic below shows, first they look at clear text TLS information (also known as TLS fingerprinting).  This can be as simple as the order of presentation of available bulk encryption algorithms, but of course is usually more complex.  Also, they offer nice real time data collection of the TLS packet streams across a variety of extracted features, including  old favorites like packet size and inter-packet gap.&lt;/p&gt;




&lt;figure&gt;

&lt;img src=&#34;https://willeatherton.com/img/Crypto1_ciscoencrypted.png&#34; /&gt;



&lt;figcaption data-pre=&#34;Figure &#34; data-post=&#34;:&#34; &gt;
  &lt;h4&gt;Cisco Encrypted Analytics&lt;/h4&gt;
  
&lt;/figcaption&gt;

&lt;/figure&gt;

&lt;p&gt;But while Cisco deserves credit, there seem to be fundamental issues with their offering.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The proposal focuses on malware detection, which overlooks other goals of MITM proxies such as policy violations related to data access, detecting data exfiltration, and validating/authenticating access to management segments and systems.&lt;/li&gt;
&lt;li&gt;As mentioned above, TLS 1.3 and other new protocols are becoming more opaque.  Cisco&amp;rsquo;s approach will likely become less relevant with the reduced clear text available with TLS1.3, the smaller set of supported cipher suites, all making TLS fingerprinting more difficult.&lt;/li&gt;
&lt;li&gt;Cisco&amp;rsquo;s solution seems to focus on TLS and omit technologies like  IPSEC VPNs, Kerberized file transfer protocols, and QUIC.&lt;/li&gt;
&lt;li&gt;In the past, solutions like malware detonation were effective &lt;a href=&#34;https://www.sans.org/reading-room/whitepapers/forensics/detecting-malware-sandbox-evasion-techniques-36667&#34; target=&#34;_blank&#34;&gt;until bad actors learned how to do end runs around the  technology&lt;/a&gt;.  By extension, it seems likely that once hackers see the  solution, they will learn to avoid TLS fingerprinting, matching packet sizes and gaps, and  other &amp;ldquo;tells&amp;rdquo; to appear similar to known applications.&lt;/li&gt;
&lt;li&gt;Cisco&amp;rsquo;s solution today depends on data collection using Cisco technology collector points.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Despite these issues, Cisco&amp;rsquo;s proposal adds value.  It would help to know what companies like Palo Alto Networks, Bluecoat, F5, and Checkpoint have to say on this topic.&lt;/p&gt;

&lt;p&gt;As a final note, back in 2012 &lt;a href=&#34;https://datatracker.ietf.org/meeting/84/materials/slides-84-tls-3&#34; target=&#34;_blank&#34;&gt;an IETF presentation by Cisco Fellow David McGrew&lt;/a&gt; pointed out many of the issues with HTTPS interception discussed here. Since that time,  the new trends have only pushed it further off the cliff.&lt;/p&gt;

&lt;h1 id=&#34;the-shape-of-the-future&#34;&gt;The shape of the future&lt;/h1&gt;

&lt;p&gt;What do the next few years hold, and what are practical solutions for enterprise-wide visibility and policy enforcement?&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;The transition to opaque crypto will start in earnest in 2018, but will take years to complete.  Mini-industries will spring up to keep legacy protocols alive for the finance industry for another 10 years. But for most enterprises, simple to deploy central policy visibility and enforcement will go away and companies will adapt.&lt;/li&gt;
&lt;li&gt;There might be a rise of non-transparent proxies for client endpoints in the enterprise. But non-transparent proxies are known to be relatively difficult to maintain, so it is unclear if this will gain widespread adoption.  Enterprises may increasingly consider client endpoints to be lost causes, and establish a goal to heavily segment them from business applications. To deal with rogue clients, use of frequent rebuild/replace of client software could be more common.&lt;/li&gt;
&lt;li&gt;For applications running on server endpoints in enterprise data centers, there will be an ongoing trend towards applying policy to the application instead of  the network.  Policy (for example, what entities  this application can talk to or receive communication from), will increasingly be a part of a developer&amp;rsquo;s definition of an application&amp;ndash;similar to software dependencies, data models, and API definitions. &lt;sup class=&#34;footnote-ref&#34; id=&#34;fnref:FootNote1&#34;&gt;&lt;a href=&#34;#fn:FootNote1&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The trend towards opaque encryption will produce a stronger  model for secure communication. But while the networking industry resets, vendors and enterprises will struggle to find the new normal.&lt;/p&gt;
&lt;div class=&#34;footnotes&#34;&gt;

&lt;hr /&gt;

&lt;ol&gt;
&lt;li id=&#34;fn:FootNote1&#34;&gt;Skyport Systems was acquired by Cisco Systems in early 2018.
 &lt;a class=&#34;footnote-return&#34; href=&#34;#fnref:FootNote1&#34;&gt;&lt;sup&gt;^&lt;/sup&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
</description>
    </item>
    
    <item>
      <title>ARM CPU&#39;s for Data Center Servers</title>
      <link>https://willeatherton.com/post/armanalysis/</link>
      <pubDate>Wed, 05 Sep 2012 14:00:29 -0800</pubDate>
      
      <guid>https://willeatherton.com/post/armanalysis/</guid>
      <description>

&lt;p&gt;&lt;em&gt;{Note this writeup was done privately at end of 2012 and so pretty outdated, but still I think it was a decent summary of the state of ARM at that time and so I publish it for fun.  I am considering to do an updated Arm Analysis given the changes that have happened in past year}&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Will Eatherton - willeatherton@gmail.com&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&#34;exec-summary&#34;&gt;Exec Summary&lt;/h2&gt;

&lt;p&gt;The buzz around Arm based CPU&amp;rsquo;s for the Server Ecosystem has been growing notably in mid 2012.  Gartner predicts that ARM servers will own 15 percent of the server CPU market within four years.&lt;/p&gt;

&lt;p&gt;There are numerous planned ARM based CPU server chips for server market : ST Micro , &lt;a href=&#34;http://www.eetimes.com/electronics-news/4230166/AMCC-demos-64-bit-ARM-server-chip&#34; target=&#34;_blank&#34;&gt;Applied Micro&lt;/a&gt; has early 64-bit prototype and seems to be leading support for ARM v8,  &lt;a href=&#34;http://www.marvell.com/embedded-processors/armada-xp/&#34; target=&#34;_blank&#34;&gt;Marvell&lt;/a&gt; was early with a 32-bit server ARM based server focused processor, &lt;a href=&#34;http://arstechnica.com/information-technology/2012/10/amd-announces-arm-based-opteron-cpus-due-to-launch-in-2014/&#34; target=&#34;_blank&#34;&gt;AMD&lt;/a&gt; has announced 64-bit ARM CPUs by 2014 , &lt;a href=&#34;http://www.eetimes.com/electronics-news/4398058/ARM--LSI-on-chip-link-connects-up-to-32-cores&#34; target=&#34;_blank&#34;&gt;LSI&lt;/a&gt; , and startup &lt;a href=&#34;http://www.calxeda.com&#34; target=&#34;_blank&#34;&gt;Calxeda&lt;/a&gt;.  Additionally there are indications within the industry that IBM/Samsung may be considering opportunities in server space using ARM (maybe more as SOC designs with partners).&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Beyond silicon plays, early stage startups like &lt;a href=&#34;http://www.netspeedsystems.com&#34; target=&#34;_blank&#34;&gt;Netspeed&lt;/a&gt; are looking at enabling the growing number of players interested in high end multi-core ARM SOCs by providing a coherent interconnect&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;a href=&#34;http://www.arm.com/about/newsroom/arm-announces-new-high-performance-system-ip-to-address-demand-for-energy-efficient-many-core.php&#34; target=&#34;_blank&#34;&gt;ARM is also working on a coherent interconnectt&lt;/a&gt; for massively multi-core designs with support for 16 cores going to 32 in the future&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;From a systems standpoint &lt;a href=&#34;http://content.dell.com/us/en/enterprise/d/campaigns/project-copper&#34; target=&#34;_blank&#34;&gt;Dell&lt;/a&gt;  has announced an ARM based server starting with a 32-bit version, and &lt;a href=&#34;http://liliputing.com/2012/06/hp-project-moonshot-drops-arm-will-use-intel-atom-servers.html&#34; target=&#34;_blank&#34;&gt;HP has indicated&lt;/a&gt; that their proof of concept project (Moonshot) will support ATOM and ARM based CPUs.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Beyond the system level end Mega Data center operators like &lt;a href=&#34;http://www.eetimes.com/electronics-news/4400339/Linaro-ARM-server-efforts-targets-Linux-code&#34; target=&#34;_blank&#34;&gt;Facebook have also have shown interestt&lt;/a&gt; in helping to support ARM insertion into data center&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Note that for system vendors as well as DIY Hyperscale DC integrators like Facebook, support of ARM in DC is somewhat self serving for the basic reason of providing negotiating leverage with Intel on pricing&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Looking at specific application of a Map and Reduce focused compute node, the question is what an ARM cpu based server could look like in &lt;sup&gt;2014&lt;/sup&gt;&amp;frasl;&lt;sub&gt;2015&lt;/sub&gt; and if it would add any notable differentiation benefits Vs Intel.  The analysis below focuses on exploring implications of 64-bit ARM cores used in data center for M&amp;amp;R applications.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Conclusion&lt;/strong&gt; : The analysis below concludes that ARM based servers for the target application do not seem worth the risks at this point.  If future projected ARM solutions could show 3-5x increase in final performance after all factors (including software) in same power profile then it would be worth revisiting.&lt;/p&gt;

&lt;h2 id=&#34;challenges-for-arm-as-server-cpu-isa&#34;&gt;Challenges for ARM as Server CPU ISA&lt;/h2&gt;

&lt;p&gt;Before getting into a low level performance/hardware analysis of ARM as a server CPU, it is important to look at what the implications of replacing x86 in data center with ARM ISA will have on the ecosystem for Software/System architecture.&lt;/p&gt;

&lt;h3 id=&#34;os-support-optimizations&#34;&gt;OS Support Optimizations&lt;/h3&gt;

&lt;p&gt;There is clearly gaps today for strong generalized Linux support of the upcoming ARM silicon for DC.  There is a recent initiative termed &lt;a href=&#34;http://www.eetimes.com/electronics-news/4400339/Linaro-ARM-server-efforts-targets-Linux-code&#34; target=&#34;_blank&#34;&gt;Linaro to focus on flushing out full linux support for ARM&lt;/a&gt; related to topics starting with boot sequences and going from there.  Beyond base driver level support a major area of concern from performance oriented software developers is the extensive tooling around benchmarking and tuning of Linux on x86 that will have to mature with ARM.&lt;/p&gt;

&lt;h3 id=&#34;compilation-tool-chains&#34;&gt;Compilation Tool Chains&lt;/h3&gt;

&lt;p&gt;It has been common wisdom for a number of years that Intel&amp;rsquo;s optimizing compiler (ICC) for C/C++ is one of the better compilers in the industry and  represents again the level of multi-year optimization around x86. &lt;a href=&#34;http://www.behardware.com/articles/847-1/the-impact-of-compilers-on-x86-x64-cpu-architectures.html&#34; target=&#34;_blank&#34;&gt;Recent studies in 2012&lt;/a&gt;, there continues to be seen a notable benefit of ICC compilers of other alternatives like GCC and Microsoft.
From the perspective of Hadoop (a Java application) the impact of not having the Intel C/C++ compiler from performance/memory standpoint may not be major, but  is representative of the types of optimization issues that ARM will have entering wide spread data center use.&lt;/p&gt;

&lt;h3 id=&#34;hypervisor-support&#34;&gt;Hypervisor Support&lt;/h3&gt;

&lt;p&gt;With ARMv7/v8 there is some support for Hardware and I/O virtualization that will be supported and available in silicon by 2014.   Paravirtualization is the description of the technique used to present software interfaces up to virtual machines and is used to compensate for these gaps (accomplished by intercepting certain instructions from guest OS and interpreting them differently for the actual hardware) .&lt;br /&gt;
* Note the ongoing maintenance of para-virtualization can be difficult with consistent performance and reliability&lt;/p&gt;

&lt;p&gt;&lt;a href=&#34;http://www.wired.com/wiredenterprise/2012/08/vmware-on-arm/&#34; target=&#34;_blank&#34;&gt;Vmware has indicated pretty bluntly&lt;/a&gt; they are in no rush to support ARM, this is of course a major issue for adoption of ARM in the data center as the open source solutions will be only real option for virtualization for ARM servers in the foreseeable future.&lt;/p&gt;

&lt;p&gt;For &lt;a href=&#34;http://blog.xen.org/index.php/2012/09/21/xensummit-sessions-new-pvh-virtualisation-mode-for-arm-cortex-a15arm-servers-and-x86/&#34; target=&#34;_blank&#34;&gt;KVM support of ARM&lt;/a&gt; which seem to be making progress but still early phase and have many years of work ahead of them on topics related to performance tuning, benchmarking, and para-virtualization enhancements to better compensate for missing virtualization extensions and hardware in ARM v7/v8.
* For the x86 architecture (Intel and AMD) starting providing support for virtualization many years ago and the time frame for ARM to reach parity will be a long time&lt;/p&gt;

&lt;p&gt;From the perspective of a Hadoop cluster, the weak support of hypervisor support on ARM is not necessarily a show stopper as it is a common case to run the Hadoop stack a non virtualized OS running bare metal, but it is still representative of the types of optimization issues that ARM will have entering wide spread data center use.&lt;/p&gt;

&lt;h3 id=&#34;java-virtual-machines&#34;&gt;Java Virtual Machines&lt;/h3&gt;

&lt;p&gt;As with prior topics, the immature state of JVM optimization for ARM compared to x86 will again be an impediment for rapid ARM adoption.  While in general the performance analysis data is sketchy in this area, &lt;a href=&#34;http://fullshovel.wordpress.com/2012/07/11/java-vs-c-on-arm/&#34; target=&#34;_blank&#34;&gt;some example experiments&lt;/a&gt; in 2012 have shown that with OpenJDK performance between C and Java on x86 platforms are in ballpark of 1:1, but when the same benchmarks are run on ARM the ratios can be as high as 3.6x to 8.9x worse for ARM.  This indicates that the level of tuning around ARM JVM support is still very immature.&lt;/p&gt;

&lt;p&gt;Oracle &lt;a href=&#34;https://blogs.oracle.com/henrik/entry/oracle_releases_jdk_for_linux&#34; target=&#34;_blank&#34;&gt;has recently announced&lt;/a&gt; that they will support their JRE on ARM.  This is very important is the Oracle JRE is commonly viewed as the clear industry grade/performance leader for JRE support compared to alternative commercial and open source options.  There are some functional limitations in Oracles planned support of ARM, but they do not appear to have major impact on server applications.  However, there is no benchmarking data yet available for Oracle&amp;rsquo;s JRE and it is expected there will be a multi-year evolution required.  Additionally the first port is focused on 32-bit and ARM v7, so support for the new set of 64-bit cores will not be until well into 2013.&lt;/p&gt;

&lt;p&gt;The JVM support  for ARM is key to Hadoop which is Java based.&lt;/p&gt;

&lt;h2 id=&#34;cpu-level-analysis-of-arm-vs-x86&#34;&gt;CPU level Analysis of ARM vs x86&lt;/h2&gt;

&lt;p&gt;Based on discussion with a processor Architect, interesting data points :&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Expects to see a 32-core, 64-bit core devices in prototype by 2H 2013&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;for integer/text manipulations (common in M&amp;amp;R applications which is example application considered here) expects that first order it can be approximated that ARM v8 cores should be on par with x86 E5 cores at the machine code level (ignoring any virtualization or tool chain differences that were explored above) at the same clock&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;From power standpoint expects 32 core 64-bit ARM v8 core CPU to be similar power as 10 core x86 CPU in similar time frame (100W) for same system level functionality.  This implies an upper bounds of 3x benefit per core for ARM&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Industry discussion of the back of the envelope statistics for a 5-10x delta between power of x86 server cores and ARM cores, generally are comparing Arm V6 32-bit cores which do not represent the power per core when the ARM ISA moves to 64-bit and starts adding more overheads like full floating point support, virtualization support (e.g. nested page tables), and coherent interconnect overheads.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;He does not see that coherent interconnect of 32-cores will be bottleneck based on his analysis of ARM&amp;rsquo;s recent multi-interconnect (CN-504)&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Looking beyond a single CPU, There is not a concrete plan available yet about support for multi-CPU mesh configurations like Intel&amp;rsquo;s QPI connection for larger shared memory  complex&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;The implication of not having this multi-CPU configuration is that each silicon instance is a standalone CPU without ability to leverage shared memory and require finer grain segregation of tasks across CPUs with separate distributed application instances across each CPU&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;There has been a &lt;a href=&#34;http://www.theregister.co.uk/2012/08/30/applied_micro_x_gene_server_chip&#34; target=&#34;_blank&#34;&gt;statement from Applied micro CEO&lt;/a&gt; that in future up to 1024 cores across 64 CPU&amp;rsquo;s is planned, though there is not much additional detail on this yet.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;




&lt;figure&gt;

&lt;img src=&#34;https://willeatherton.com/img/IntelCPU.png&#34; /&gt;



&lt;figcaption data-pre=&#34;Figure &#34; data-post=&#34;:&#34; &gt;
  &lt;h4&gt;Example Intel E5 Multi-CPU Configuration&lt;/h4&gt;
  
&lt;/figcaption&gt;

&lt;/figure&gt;

&lt;h2 id=&#34;analysis-of-arm-cpu-for-a-m-r-compute-node&#34;&gt;Analysis of Arm CPU for a M&amp;amp;R Compute Node&lt;/h2&gt;

&lt;p&gt;At a system level beyond the topic of the potential compute benefits (per Watt) of ARM vs x86, and the software complexities is question of how relevant this trade-off for a given application area.&lt;/p&gt;

&lt;p&gt;First lets consider a very rough estimate for normalizing performance to BIPS (Billions of Instructions per Second) for integer operations of an ARM and x86 based CPU within 100W budget for silicon expected to be available by end of 2013.  Note that the relative JVM performance estimates may be optimistic in favor of ARM.&lt;/p&gt;

&lt;p&gt;Relative Comparison of performance for x86 Vs ARM 64-bit Server CPU&lt;/p&gt;

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Performance Factor&lt;/th&gt;
&lt;th&gt;ARM&lt;/th&gt;
&lt;th&gt;x86&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;

&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Number of Cores&lt;/td&gt;
&lt;td&gt;32&lt;/td&gt;
&lt;td&gt;10&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Clock (Ghz)&lt;/td&gt;
&lt;td&gt;3&lt;/td&gt;
&lt;td&gt;2.4&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;ISA efficiency for Integer operations&lt;/td&gt;
&lt;td&gt;.5&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Linux OS Perf Relative to x86&lt;/td&gt;
&lt;td&gt;.95&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;JVM Performance Implications&lt;/td&gt;
&lt;td&gt;.7&lt;/td&gt;
&lt;td&gt;1&lt;/td&gt;
&lt;/tr&gt;

&lt;tr&gt;
&lt;td&gt;Final relative BIPS&lt;/td&gt;
&lt;td&gt;32&lt;/td&gt;
&lt;td&gt;24&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;strong&gt;In summary while a crude estimate, this final ratio of relative performance with in 100W is close enough to 1:1 that it is not interesting.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Going to system level, if we assume that over time with software and further silicon optimization ARM based CPUs improved to a solid 2x final performance (relative BIPS) per watt benefit of ARM over x86 after all overheads, how much would this impact system optimization for the Map and Reduce application in a rack server ?&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Taking into account memory, disk, IO and other overheads, the final system impact in system density for a 2:1 would have estimated &amp;lt;20% benefit at system level.  This does not seem to have enough impact to warrant the significant risk and effort.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;As an example, consider that for recent hadoop cluster analysis, the ratio of x86 cores to spindles may be as high as 1:5, this implies that a blade with say 32 cores would matchup with 160 spinning disks.   This is significant amount of space and power compared to the CPU complex, making the raw CPU performance less relevant.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;If it were possible to achieve a ratio of say 3-5x of ARM over x86 in final relative BIP performance per watt, and aiming for 100&amp;rsquo;s of ARM cores on a blade (or in a 2RU rack server), then merging this optimization with a major overhaul of the system design to match the massively multi-core architecture in areas of disk/memory/IO could result in a significant different optimization point then x86 servers today.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
